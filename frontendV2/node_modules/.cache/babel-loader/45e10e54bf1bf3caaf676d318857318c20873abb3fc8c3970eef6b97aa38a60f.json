{"ast":null,"code":"import _slicedToArray from\"C:/Users/a.tiwari/git/amazon-s3-multipart-upload-transfer-acceleration/frontendV2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./App.css\";import{Uploader}from\"./utils/upload\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),pgvalue=_useState4[0],setPgvalue=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),perf=_useState6[0],setPerf=_useState6[1];var _useState7=useState(undefined),_useState8=_slicedToArray(_useState7,2),baseUrl=_useState8[0],setBaseUrl=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),partsize=_useState10[0],setPartsize=_useState10[1];var _useState11=useState(undefined),_useState12=_slicedToArray(_useState11,2),numuploads=_useState12[0],setNumuploads=_useState12[1];var _useState13=useState(undefined),_useState14=_slicedToArray(_useState13,2),ta=_useState14[0],setTa=_useState14[1];useEffect(function(){if(file){var uploaderOptions={file:file,baseURL:baseUrl,chunkSize:partsize,threadsQuantity:numuploads,useTransferAcceleration:ta};var percentage=undefined;setPgvalue(0);setPerf(\"-\");var uploader=new Uploader(uploaderOptions);var tBegin=performance.now();uploader.onProgress(function(_ref){var newPercentage=_ref.percentage;// to avoid the same percentage to be logged twice\nif(percentage===100){setPerf((performance.now()-tBegin)/1000);}if(newPercentage!==percentage){percentage=newPercentage;setPgvalue(percentage);}}).onError(function(error){setFile(undefined);console.error(error);});uploader.start();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[file]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#e2e2e2\",padding:\"20px\",margin:\"10px\"},children:[/*#__PURE__*/_jsx(\"strong\",{style:{display:\"block\"},children:\"Step 1 - Enter API URL\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"urlinput\",style:{width:\"50%\"},placeholder:\"https://example.execute-api.example.amazonaws.com/example/\",onChange:function onChange(e){var _e$target;setBaseUrl((_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#e2e2e2\",padding:\"20px\",margin:\"10px\"},children:[/*#__PURE__*/_jsx(\"strong\",{style:{display:\"block\"},children:\"Step 2 - Choose part size (MB)\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"pu\",min:\"5\",max:\"500\",onChange:function onChange(e){var _e$target2;setPartsize((_e$target2=e.target)===null||_e$target2===void 0?void 0:_e$target2.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#e2e2e2\",padding:\"20px\",margin:\"10px\"},children:[/*#__PURE__*/_jsx(\"strong\",{style:{display:\"block\"},children:\"Step 3 - Choose number of parallel uploads\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"pu\",min:\"5\",max:\"10\",onChange:function onChange(e){var _e$target3;setNumuploads((_e$target3=e.target)===null||_e$target3===void 0?void 0:_e$target3.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#e2e2e2\",padding:\"20px\",margin:\"10px\"},children:[/*#__PURE__*/_jsx(\"strong\",{style:{display:\"block\"},children:\"Step 4 - Use Transfer Acceleration\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"ta\",onChange:function onChange(e){var _e$target4;setTa((_e$target4=e.target)===null||_e$target4===void 0?void 0:_e$target4.checked);}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#e2e2e2\",padding:\"20px\",margin:\"10px\"},children:[/*#__PURE__*/_jsx(\"strong\",{style:{display:\"block\"},children:\"Step 5 - Choose a file\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileinput\",onChange:function onChange(e){var _e$target5,_e$target5$files;setFile((_e$target5=e.target)===null||_e$target5===void 0?void 0:(_e$target5$files=_e$target5.files)===null||_e$target5$files===void 0?void 0:_e$target5$files[0]);}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#e2e2e2\",padding:\"20px\",margin:\"10px\"},children:[/*#__PURE__*/_jsx(\"strong\",{style:{display:\"block\"},children:\"Step 6 - Monitor\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{id:\"output\",children:[pgvalue,\"% (\",perf,\" sec)\"]})]})]});}export default App;","map":{"version":3,"names":["Uploader","useEffect","useState","jsx","_jsx","jsxs","_jsxs","App","_useState","undefined","_useState2","_slicedToArray","file","setFile","_useState3","_useState4","pgvalue","setPgvalue","_useState5","_useState6","perf","setPerf","_useState7","_useState8","baseUrl","setBaseUrl","_useState9","_useState10","partsize","setPartsize","_useState11","_useState12","numuploads","setNumuploads","_useState13","_useState14","ta","setTa","uploaderOptions","baseURL","chunkSize","threadsQuantity","useTransferAcceleration","percentage","uploader","tBegin","performance","now","onProgress","_ref","newPercentage","onError","error","console","start","children","style","backgroundColor","padding","margin","display","type","id","width","placeholder","onChange","e","_e$target","target","value","min","max","_e$target2","_e$target3","_e$target4","checked","_e$target5","_e$target5$files","files"],"sources":["C:/Users/a.tiwari/git/amazon-s3-multipart-upload-transfer-acceleration/frontendV2/src/App.js"],"sourcesContent":["import \"./App.css\"\r\nimport { Uploader } from \"./utils/upload\"\r\nimport { useEffect, useState } from \"react\"\r\n\r\nfunction App() {\r\n  const [file, setFile] = useState(undefined)\r\n  const [pgvalue, setPgvalue] = useState(undefined)\r\n  const [perf,setPerf] = useState(undefined)\r\n  const [baseUrl,setBaseUrl] = useState(undefined)\r\n  const [partsize,setPartsize] = useState(undefined)\r\n  const [numuploads,setNumuploads] = useState(undefined)\r\n  const [ta,setTa] = useState(undefined)\r\n\r\n  useEffect(() => {\r\n    if (file) {\r\n      const uploaderOptions = {\r\n        file: file,\r\n        baseURL: baseUrl,\r\n        chunkSize: partsize,\r\n        threadsQuantity: numuploads,\r\n        useTransferAcceleration: ta \r\n      }\r\n\r\n      let percentage = undefined\r\n      setPgvalue(0)\r\n      setPerf(\"-\")\r\n      const uploader = new Uploader(uploaderOptions)\r\n      const tBegin=performance.now()\r\n      uploader\r\n        .onProgress(({ percentage: newPercentage }) => {\r\n          // to avoid the same percentage to be logged twice\r\n          if(percentage === 100){\r\n             setPerf((performance.now() - tBegin)/1000)\r\n          }\r\n          if (newPercentage !== percentage) {\r\n            percentage = newPercentage\r\n            setPgvalue(percentage)\r\n          }\r\n        })\r\n        .onError((error) => {\r\n          setFile(undefined)\r\n          console.error(error)\r\n        })\r\n\r\n      uploader.start()      \r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [file])\r\n\r\n  return (\r\n    <div >\r\n      <div style={{ backgroundColor: \"#e2e2e2\", padding: \"20px\", margin: \"10px\"}}>    \r\n        <strong style={{display: \"block\"}}>Step 1 - Enter API URL</strong><br/>\r\n        <input type=\"text\" id=\"urlinput\" style={{width: \"50%\"}} placeholder=\"https://example.execute-api.example.amazonaws.com/example/\" \r\n               onChange={(e) => {\r\n                setBaseUrl(e.target?.value)\r\n               }}\r\n        />\r\n      </div>  \r\n      <div style={{ backgroundColor: \"#e2e2e2\", padding: \"20px\", margin: \"10px\"}}>\r\n        <strong style={{display: \"block\"}}>Step 2 - Choose part size (MB)</strong><br/>\r\n        <input type=\"number\" id=\"pu\" min=\"5\" max=\"500\"\r\n               onChange={(e) => {\r\n                setPartsize(e.target?.value)\r\n               }}\r\n        />\r\n      </div>      \r\n      <div style={{ backgroundColor: \"#e2e2e2\", padding: \"20px\", margin: \"10px\"}}>\r\n        <strong style={{display: \"block\"}}>Step 3 - Choose number of parallel uploads</strong><br/>\r\n        <input type=\"number\" id=\"pu\" min=\"5\" max=\"10\"\r\n               onChange={(e) => {\r\n                setNumuploads(e.target?.value)\r\n               }}\r\n        />\r\n      </div> \r\n      <div style={{ backgroundColor: \"#e2e2e2\", padding: \"20px\", margin: \"10px\"}}>\r\n        <strong style={{display: \"block\"}}>Step 4 - Use Transfer Acceleration</strong><br/>\r\n        <input type=\"checkbox\" id=\"ta\"\r\n               onChange={(e) => {\r\n                setTa(e.target?.checked)\r\n               }}\r\n        />\r\n      </div>                 \r\n      <div style={{ backgroundColor: \"#e2e2e2\", padding: \"20px\", margin: \"10px\"}}>\r\n        <strong style={{display: \"block\"}}>Step 5 - Choose a file</strong><br/>\r\n        <input type=\"file\" id=\"fileinput\" \r\n               onChange={(e) => {\r\n                setFile(e.target?.files?.[0])\r\n               }}\r\n        />\r\n      </div>\r\n      <div style={{ backgroundColor: \"#e2e2e2\", padding: \"20px\", margin: \"10px\"}}>\r\n        <strong style={{display: \"block\"}}>Step 6 - Monitor</strong><br/>\r\n        <span id=\"output\">{pgvalue}% ({perf} sec)</span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}